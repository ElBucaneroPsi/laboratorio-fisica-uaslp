<!DOCTYPE html>
<html lang="es"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorio de F√≠sica - UASLP</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --matrix-green: #00FF41;
            --matrix-dark: #003B00;
            --matrix-black: #0D0D0D;
            --matrix-bg: #000000;
            --matrix-dim: #008F11;
            --matrix-glow: 0 0 10px #00FF41, 0 0 20px #00FF41;
            --matrix-error: #FF3333;
        }
        body {
            font-family: 'Roboto Mono', 'Courier New', monospace;
            background-color: var(--matrix-bg);
            color: var(--matrix-green);
            min-height: 100vh;
        }
        #matrix-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        .app-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        .header {
            background-color: rgba(13, 13, 13, 0.95);
            border: 2px solid var(--matrix-green);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 24px;
            box-shadow: var(--matrix-glow);
            text-align: center;
        }
        .header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--matrix-green);
            text-shadow: var(--matrix-glow);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .header .subtitle { font-size: 0.9rem; color: var(--matrix-dim); margin-bottom: 5px; }
        .header .professor { font-size: 1rem; color: var(--matrix-green); font-weight: 500; margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--matrix-dim); }
        .header-datetime { font-size: 0.85rem; color: var(--matrix-dim); margin-top: 10px; padding: 8px 15px; border: 1px solid var(--matrix-dim); border-radius: 4px; display: inline-block; background: rgba(0, 59, 0, 0.3); }
        .nav-back { margin-bottom: 20px; }
        .btn-back {
            background: transparent;
            border: 1px solid var(--matrix-green);
            color: var(--matrix-green);
            padding: 10px 20px;
            font-family: inherit;
            font-size: 0.9rem;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s;
        }
        .btn-back:hover { background: var(--matrix-green); color: var(--matrix-bg); box-shadow: 0 0 15px var(--matrix-green); }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
        .landing-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 24px;
            margin-top: 40px;
        }
        .menu-card {
            background: rgba(13, 13, 13, 0.9);
            border: 2px solid var(--matrix-green);
            border-radius: 8px;
            padding: 40px 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 10px var(--matrix-dim);
        }
        .menu-card:hover { transform: translateY(-5px); box-shadow: 0 0 25px var(--matrix-green); background: rgba(0, 255, 65, 0.05); }
        .menu-card .icon { font-size: 4rem; margin-bottom: 20px; text-shadow: var(--matrix-glow); }
        .menu-card h2 { font-size: 1.4rem; color: var(--matrix-green); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 10px; }
        .menu-card p { color: var(--matrix-dim); font-size: 0.9rem; }
        .booking-card, .alta-card {
            background-color: rgba(13, 13, 13, 0.95);
            border: 2px solid var(--matrix-green);
            border-radius: 8px;
            padding: 24px;
            box-shadow: 0 0 10px var(--matrix-dim);
        }
        .alta-card { max-width: 600px; margin: 0 auto; }
        .alta-card h2, .booking-card h2 { text-align: center; margin-bottom: 30px; color: var(--matrix-green); text-transform: uppercase; letter-spacing: 2px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; font-weight: 500; margin-bottom: 8px; color: var(--matrix-green); }
        .form-group input, .form-group select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--matrix-green);
            border-radius: 4px;
            font-size: 0.95rem;
            font-family: inherit;
            background-color: var(--matrix-bg);
            color: var(--matrix-green);
        }
        .form-group input::placeholder { color: var(--matrix-dark); }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: var(--matrix-green); box-shadow: 0 0 10px var(--matrix-green); }
        .form-group input.error { border-color: var(--matrix-error); box-shadow: 0 0 10px var(--matrix-error); }
        .error-message { color: var(--matrix-error); font-size: 0.8rem; margin-top: 4px; }
        .btn { padding: 12px 24px; border-radius: 4px; font-size: 0.95rem; font-weight: 500; cursor: pointer; font-family: inherit; transition: all 0.3s; border: 1px solid var(--matrix-green); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-primary { background-color: var(--matrix-green); color: var(--matrix-bg); width: 100%; }
        .btn-primary:hover:not(:disabled) { box-shadow: 0 0 20px var(--matrix-green); }
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); z-index: 1000; align-items: center; justify-content: center; }
        .modal-overlay.active { display: flex; }
        .modal { background-color: var(--matrix-black); border: 2px solid var(--matrix-green); border-radius: 8px; padding: 40px; max-width: 450px; width: 90%; text-align: center; box-shadow: var(--matrix-glow); }
        .modal h2 { font-size: 1.5rem; margin-bottom: 8px; color: var(--matrix-green); text-shadow: 0 0 10px var(--matrix-green); }
        .modal p { color: var(--matrix-dim); margin-bottom: 24px; }
        .confirmation-code { background-color: var(--matrix-dark); padding: 20px; border-radius: 8px; margin-bottom: 24px; border: 1px solid var(--matrix-green); }
        .confirmation-code .code { font-size: 1.75rem; font-weight: 700; color: var(--matrix-green); letter-spacing: 3px; text-shadow: 0 0 10px var(--matrix-green); }
        .spinner { display: inline-block; width: 20px; height: 20px; border: 2px solid var(--matrix-bg); border-radius: 50%; border-top-color: var(--matrix-bg); animation: spin 1s ease-in-out infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .toast-container { position: fixed; bottom: 24px; right: 24px; z-index: 1001; }
        .toast { background-color: var(--matrix-black); padding: 16px 20px; border-radius: 8px; box-shadow: 0 0 15px var(--matrix-dim); margin-top: 12px; border-left: 4px solid var(--matrix-green); color: var(--matrix-green); }
        .toast.error { border-left-color: var(--matrix-error); color: var(--matrix-error); }
        @media (max-width: 600px) { .header h1 { font-size: 1.2rem; } .menu-card { padding: 30px 20px; } .menu-card h2 { font-size: 1.1rem; } }
    </style>
</head>
<body>
    <canvas id="matrix-canvas"></canvas>
    <div class="app-container">
        <header class="header">
            <h1>Laboratorio de F√≠sica</h1>
            <p class="subtitle">Facultad de Ciencias - UASLP</p>
            <p class="professor">Prof. Juan Guillermo T√©llez Villalobos</p>
            <div id="currentDateTime" class="header-datetime"></div>
        </header>

        <div id="section-landing" class="section active">
            <div class="landing-menu">
                <div class="menu-card" onclick="mostrarSeccion('alta')">
                    <div class="icon">üìù</div>
                    <h2>Darte de Alta en el Sistema</h2>
                    <p>Registro solo una vez al inicio del semestre</p>
                </div>
                <div class="menu-card" onclick="mostrarSeccion('reservation')">
                    <div class="icon">üìÖ</div>
                    <h2>Reservaciones</h2>
                    <p>Reserva equipos y horarios del laboratorio</p>
                </div>
                <div class="menu-card" onclick="mostrarSeccion('downloads')">
                    <div class="icon">üì•</div>
                    <h2>Pr√°cticas</h2>
                    <p>Descarga gu√≠as de pr√°cticas</p>
                </div>
                <div class="menu-card" onclick="mostrarSeccion('rol')">
                    <div class="icon">üìã</div>
                    <h2>Rol de Pr√°cticas</h2>
                    <p>Calendario del semestre</p>
                </div>
            </div>
        </div>

        <div id="section-reservation" class="section">
            <div class="nav-back">
                <button class="btn-back" onclick="mostrarSeccion('landing')">‚Üê VOLVER AL MEN√ö</button>
            </div>
            <div class="booking-card">
                <h2>Sistema de Reservaciones</h2>
                <p style="color: var(--matrix-dim); margin-bottom: 20px;">Para reservar, completa los siguientes datos:</p>
                <form id="reservacionForm">
                    <div class="form-group">
                        <label for="nombreEquipo">Nombre del Equipo *</label>
                        <input type="text" id="nombreEquipo" placeholder="EJ: EQUIPO ALPHA">
                        <span class="error-message" id="nombreEquipoError"></span>
                    </div>
                    <div class="form-group">
                        <label for="nombreResponsable">Nombre del Responsable *</label>
                        <input type="text" id="nombreResponsable" placeholder="NOMBRE COMPLETO">
                        <span class="error-message" id="nombreResponsableError"></span>
                    </div>
                    <div class="form-group">
                        <label for="correo">Correo Institucional *</label>
                        <input type="email" id="correo" placeholder="CORREO@UNIVERSIDAD.EDU">
                        <span class="error-message" id="correoError"></span>
                    </div>
                    <div class="form-group">
                        <label for="fechaReserva">Fecha de Reserva *</label>
                        <input type="date" id="fechaReserva">
                        <span class="error-message" id="fechaReservaError"></span>
                    </div>
                    <div class="form-group">
                        <label for="horaReserva">Hora de Reserva *</label>
                        <select id="horaReserva">
                            <option value="">SELECCIONAR HORA</option>
                            <option value="08:00">08:00 - 09:00</option>
                            <option value="09:00">09:00 - 10:00</option>
                            <option value="10:00">10:00 - 11:00</option>
                            <option value="11:00">11:00 - 12:00</option>
                            <option value="12:00">12:00 - 13:00</option>
                            <option value="13:00">13:00 - 14:00</option>
                            <option value="14:00">14:00 - 15:00</option>
                            <option value="15:00">15:00 - 16:00</option>
                            <option value="16:00">16:00 - 17:00</option>
                            <option value="17:00">17:00 - 18:00</option>
                        </select>
                        <span class="error-message" id="horaReservaError"></span>
                    </div>
                    <button type="button" class="btn btn-primary" id="btnReservar">CONFIRMAR RESERVA</button>
                </form>
            </div>
        </div>

        <div id="section-alta" class="section">
            <div class="nav-back">
                <button class="btn-back" onclick="mostrarSeccion('landing')">‚Üê VOLVER AL MEN√ö</button>
            </div>
            <div class="alta-card">
                <h2>REGISTRO AL COMIENZO DEL CURSO</h2>
                <p style="text-align: center; color: var(--matrix-dim); margin-bottom: 20px;">(Solo registrarse una sola vez)</p>
                <form id="altaForm">
                    <div class="form-group">
                        <label for="altaName">Nombre Completo del Alumno *</label>
                        <input type="text" id="altaName" placeholder="APELLIDO PATERNO APELLIDO MATERNO - NOMBRE(S)">
                        <span class="error-message" id="altaNameError"></span>
                    </div>
                    <div class="form-group">
                        <label for="altaClave">Clave del Alumno *</label>
                        <input type="text" id="altaClave" placeholder="INGRESA TU CLAVE">
                        <span class="error-message" id="altaClaveError"></span>
                    </div>
                    <div class="form-group">
                        <label for="altaProfessor">Seleccionar Profesor *</label>
                        <select id="altaProfessor" onchange="actualizarInfoAlta()">
                            <option value="">SELECCIONAR PROFESOR</option>
                            <option value="Alonso √Ålvarez Mar√≠a Alicia - 17:00-18:00 - E1-302">ALONSO √ÅLVAREZ MAR√çA ALICIA (E&D) - 17:00-18:00 - E1-302</option>
                            <option value="Flores Sandoval Omar - L14:00-16:00, Mi14:00-16:00, V14:00-15:00 - E1-204">FLORES SANDOVAL OMAR (E&D) - L14-16, MI14-16, V14-15 - E1-204</option>
                            <option value="Ortega Zarzosa Gerardo - L08:00-10:00, Mi08:00-10:00, V08:00-09:00 - E1-303">ORTEGA ZARZOSA GERARDO (E&D) - L08-10, MI08-10, V08-09 - E1-303</option>
                            <option value="M√©ndez Mart√≠nez Jos√© Manuel - M12:00-14:00, J12:00-14:00, V13:00-14:00 - E1-102">M√âNDEZ MART√çNEZ JOS√â MANUEL (O&T) - M12-14, J12-14, V13-14 - E1-102</option>
                            <option value="Castillo Soria Francisco Rub√©n - M10:00-12:00, J10:00-12:00, V11:00-12:00 - E3-402">CASTILLO SORIA FRANCISCO RUB√âN (E&M) - M10-12, J10-12, V11-12 - E3-402</option>
                        </select>
                        <span class="error-message" id="altaProfessorError"></span>
                    </div>
                    <div class="form-group">
                        <label for="altaInfo">Informaci√≥n Seleccionada</label>
                        <input type="text" id="altaInfo" placeholder="SE MOSTRAR√Å LA SELECCI√ìN" readonly style="background: var(--matrix-dark);">
                    </div>
                    <button type="button" class="btn btn-primary" id="btnRegistrarAlta">REGISTRAR ALTA</button>
                </form>
            </div>
        </div>

        <div id="section-downloads" class="section">
            <div class="nav-back">
                <button class="btn-back" onclick="mostrarSeccion('landing')">‚Üê VOLVER AL MEN√ö</button>
            </div>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--matrix-green);">Pr√°cticas Disponibles</h2>
            <div class="landing-menu">
                <div class="menu-card">
                    <div class="icon">‚öôÔ∏è</div>
                    <h3>Est√°tica y Din√°mica</h3>
                </div>
                <div class="menu-card">
                    <div class="icon">üåä</div>
                    <h3>Ondas y Termodin√°mica</h3>
                </div>
                <div class="menu-card">
                    <div class="icon">‚ö°</div>
                    <h3>Electricidad y Magnetismo</h3>
                </div>
            </div>
        </div>

        <div id="section-rol" class="section">
            <div class="nav-back">
                <button class="btn-back" onclick="mostrarSeccion('landing')">‚Üê VOLVER AL MEN√ö</button>
            </div>
            <h2 style="text-align: center; margin-bottom: 10px; color: var(--matrix-green);">Rol de Pr√°cticas del Semestre</h2>
            <div class="booking-card">
                <p style="color: var(--matrix-dim); text-align: center; margin-bottom: 20px;">El calendario de pr√°cticas se mostrar√° aqu√≠.</p>
                <div class="entrega-nota" style="display: flex; align-items: center; gap: 20px; padding: 20px; background: linear-gradient(135deg, rgba(0, 255, 65, 0.15), rgba(0, 59, 0, 0.3)); border: 2px solid var(--matrix-green); border-radius: 12px;">
                    <div style="font-size: 3rem;">üìù</div>
                    <div>
                        <h4 style="color: var(--matrix-green); margin-bottom: 10px;">ENTREGA DE REPORTE/BIT√ÅCORA</h4>
                        <p style="color: var(--matrix-green);">Recuerda entregar tu reporte/bit√°cora en la siguiente sesi√≥n de laboratorio</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="modalExito" class="modal-overlay">
            <div class="modal">
                <h2 id="tituloModal">REGISTRO EXITOSO</h2>
                <p id="mensajeModal">Tu registro ha sido guardado.</p>
                <div class="confirmation-code">
                    <div style="font-size: 0.85rem; color: var(--matrix-dim); margin-bottom: 8px;">C√ìDIGO DE CONFIRMACI√ìN</div>
                    <div class="code" id="codigoConfirmacion">ALT000000</div>
                </div>
                <button class="btn btn-primary" onclick="cerrarModal()">ACEPTAR</button>
            </div>
        </div>

        <div id="toastContainer" class="toast-container"></div>
    </div>

    <script>
        // ===== CONFIGURACI√ìN =====
        // IMPORTANTE: Reemplaza esta URL con la URL de tu Google Apps Script deployado
        var URL_GOOGLE_SCRIPT = 'https://script.google.com/macros/s/TU_URL_DE_GOOGLE_SCRIPT_AQUI/exec';

        // ===== VARIABLES GLOBALES =====
        var fechaHoraActual = document.getElementById('currentDateTime');
        
        // ===== INICIALIZACI√ìN =====
        document.addEventListener('DOMContentLoaded', function() {
            inicializarAplicacion();
            actualizarFechaHora();
            setInterval(actualizarFechaHora, 1000);
            
            // Event Listeners para los botones
            document.getElementById('btnReservar').addEventListener('click', procesarReservacion);
            document.getElementById('btnRegistrarAlta').addEventListener('click', procesarAlta);
            
            // Configurar fecha m√≠nima como hoy
            var hoy = new Date().toISOString().split('T')[0];
            document.getElementById('fechaReserva').setAttribute('min', hoy);
        });

        // ===== FUNCIONES DE NAVEGACI√ìN =====
        function mostrarSeccion(nombreSeccion) {
            var secciones = document.querySelectorAll('.section');
            secciones.forEach(function(sec) {
                sec.classList.remove('active');
            });
            var seccionObjetivo = document.getElementById('section-' + nombreSeccion);
            if (seccionObjetivo) {
                seccionObjetivo.classList.add('active');
            }
        }

        // ===== FUNCIONES DE UTILIDAD =====
        function actualizarFechaHora() {
            var ahora = new Date();
            var opciones = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };
            var fechaStr = ahora.toLocaleDateString('es-ES', opciones).toUpperCase();
            if (fechaHoraActual) {
                fechaHoraActual.textContent = fechaStr;
            }
        }

        function mostrarToast(mensaje, tipo) {
            var contenedor = document.getElementById('toastContainer');
            var toast = document.createElement('div');
            toast.className = 'toast ' + (tipo || '');
            toast.textContent = mensaje;
            contenedor.appendChild(toast);
            setTimeout(function() {
                toast.remove();
            }, 4000);
        }

        function mostrarModal(titulo, mensaje, codigo) {
            document.getElementById('tituloModal').textContent = titulo;
            document.getElementById('mensajeModal').textContent = mensaje;
            document.getElementById('codigoConfirmacion').textContent = codigo;
            document.getElementById('modalExito').classList.add('active');
        }

        function cerrarModal() {
            document.getElementById('modalExito').classList.remove('active');
            mostrarSeccion('landing');
        }

        // ===== FUNCIONES DE ALTA =====
        function actualizarInfoAlta() {
            var professor = document.getElementById('altaProfessor').value;
            document.getElementById('altaInfo').value = professor;
        }

        function procesarAlta() {
            console.log('Iniciando proceso de alta...');
            
            var nombre = document.getElementById('altaName').value.trim();
            var clave = document.getElementById('altaClave').value.trim();
            var professor = document.getElementById('altaProfessor').value;
            var valido = true;
            
            // Validar nombre
            if (!nombre) {
                document.getElementById('altaName').classList.add('error');
                document.getElementById('altaNameError').textContent = 'OBLIGATORIO';
                valido = false;
            } else {
                document.getElementById('altaName').classList.remove('error');
                document.getElementById('altaNameError').textContent = '';
            }
            
            // Validar clave
            if (!clave) {
                document.getElementById('altaClave').classList.add('error');
                document.getElementById('altaClaveError').textContent = 'OBLIGATORIA';
                valido = false;
            } else {
                document.getElementById('altaClave').classList.remove('error');
                document.getElementById('altaClaveError').textContent = '';
            }
            
            // Validar profesor
            if (!professor) {
                document.getElementById('altaProfessor').classList.add('error');
                document.getElementById('altaProfessorError').textContent = 'SELECCIONA UN PROFESOR';
                valido = false;
            } else {
                document.getElementById('altaProfessor').classList.remove('error');
                document.getElementById('altaProfessorError').textContent = '';
            }
            
            if (!valido) {
                mostrarToast('COMPLETA TODOS LOS CAMPOS OBLIGATORIOS', 'error');
                return;
            }
            
            var boton = document.getElementById('btnRegistrarAlta');
            boton.disabled = true;
            boton.innerHTML = '<span class="spinner"></span> GUARDANDO...';
            
            var partesProfesor = professor.split(' - ');
            var nombreProfesor = partesProfesor[0] || '';
            var horarioProfesor = partesProfesor[1] || '';
            var aulaProfesor = partesProfesor[2] || '';
            
            var datosAlta = {
                accion: 'registrar_alta',
                nombre: nombre,
                clave: clave,
                profesor: nombreProfesor,
                horario: horarioProfesor,
                aula: aulaProfesor
            };
            
            console.log('Enviando datos:', datosAlta);
            
            // Enviar a Google Sheets
            if (URL_GOOGLE_SCRIPT.indexOf('TU_URL_DE_GOOGLE_SCRIPT') === -1) {
                fetch(URL_GOOGLE_SCRIPT, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                    body: JSON.stringify(datosAlta)
                });
            }
            
            setTimeout(function() {
                boton.disabled = false;
                boton.innerHTML = 'REGISTRAR ALTA';
                document.getElementById('altaForm').reset();
                document.getElementById('altaInfo').value = '';
                var codigo = 'ALT' + Math.random().toString(36).substr(2, 6).toUpperCase();
                mostrarModal('REGISTRO EXITOSO', 'Tu alta ha sido guardada en la hoja de Altas.', codigo);
            }, 2000);
        }

        // ===== FUNCIONES DE RESERVACI√ìN =====
        function procesarReservacion() {
            console.log('Iniciando proceso de reservaci√≥n...');
            
            var nombreEquipo = document.getElementById('nombreEquipo').value.trim();
            var nombreResponsable = document.getElementById('nombreResponsable').value.trim();
            var correo = document.getElementById('correo').value.trim();
            var fecha = document.getElementById('fechaReserva').value;
            var hora = document.getElementById('horaReserva').value;
            var valido = true;
            
            // Validaciones
            if (!nombreEquipo) {
                document.getElementById('nombreEquipo').classList.add('error');
                document.getElementById('nombreEquipoError').textContent = 'OBLIGATORIO';
                valido = false;
            }
            if (!nombreResponsable) {
                document.getElementById('nombreResponsable').classList.add('error');
                document.getElementById('nombreResponsableError').textContent = 'OBLIGATORIO';
                valido = false;
            }
            if (!correo || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(correo)) {
                document.getElementById('correo').classList.add('error');
                document.getElementById('correoError').textContent = 'CORREO NO V√ÅLIDO';
                valido = false;
            }
            if (!fecha) {
                document.getElementById('fechaReserva').classList.add('error');
                document.getElementById('fechaReservaError').textContent = 'OBLIGATORIA';
                valido = false;
            }
            if (!hora) {
                document.getElementById('horaReserva').classList.add('error');
                document.getElementById('horaReservaError').textContent = 'SELECCIONA HORA';
                valido = false;
            }
            
            if (!valido) {
                mostrarToast('COMPLETA TODOS LOS CAMPOS OBLIGATORIOS', 'error');
                return;
            }
            
            var boton = document.getElementById('btnReservar');
            boton.disabled = true;
            boton.innerHTML = '<span class="spinner"></span> GUARDANDO...';
            
            var datosReservacion = {
                accion: 'reservar',
                nombre_equipo: nombreEquipo,
                responsable: nombreResponsable,
                correo: correo,
                fecha: fecha,
                hora: hora
            };
            
            console.log('Enviando reservaci√≥n:', datosReservacion);
            
            // Enviar a Google Sheets
            if (URL_GOOGLE_SCRIPT.indexOf('TU_URL_DE_GOOGLE_SCRIPT') === -1) {
                fetch(URL_GOOGLE_SCRIPT, {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                    body: JSON.stringify(datosReservacion)
                });
            }
            
            setTimeout(function() {
                boton.disabled = false;
                boton.innerHTML = 'CONFIRMAR RESERVA';
                document.getElementById('reservacionForm').reset();
                var codigo = 'RES' + Math.random().toString(36).substr(2, 6).toUpperCase();
                mostrarModal('RESERVA CONFIRMADA', 'Tu reserva ha sido guardada exitosamente.', codigo);
            }, 2000);
        }

        function inicializarAplicacion() {
            console.log('Aplicaci√≥n inicializada correctamente');
        }

        // ===== EFECTO DE LLUVIA MATRIX =====
        (function() {
            var canvas = document.getElementById('matrix-canvas');
            var ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            var caracteres = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*()_+{}[]|\\:;"<>,.?/~`';
            var tamanoFuente = 14;
            var columnas = canvas.width / tamanoFuente;
            var gotas = [];
            for (var i = 0; i < columnas; i++) {
                gotas[i] = Math.random() * -100;
            }
            function dibujar() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = '#00FF41';
                ctx.font = tamanoFuente + 'px Roboto Mono, monospace';
                for (var i = 0; i < gotas.length; i++) {
                    var caracter = caracteres[Math.floor(Math.random() * caracteres.length)];
                    ctx.fillText(caracter, i * tamanoFuente, gotas[i] * tamanoFuente);
                    if (gotas[i] * tamanoFuente > canvas.height && Math.random() > 0.975) {
                        gotas[i] = 0;
                    }
                    gotas[i]++;
                }
            }
            setInterval(dibujar, 50);
            window.addEventListener('resize', function() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                columnas = canvas.width / tamanoFuente;
                gotas = [];
                for (var i = 0; i < columnas; i++) {
                    gotas[i] = Math.random() * -100;
                }
            });
        })();
    </script>
</body>
</html>
